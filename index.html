<!DOCTYPE html>
<html lang="es">
<head>
    </head>
<body>
    <div class="login-container">
        <div class="error-message" id="error-message"></div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.15.0/firebase-firestore-compat.js"></script>
    <script type="module" src="firebase-config.js"></script>

    <script type="module">
        import { signInWithDNIAndPassword } from './firebase-auth.js';
        import { displayError, redirectTo } from './ui-handler.js';

        const form = document.getElementById('loginForm');

        form.addEventListener('submit', async (event) => {
            event.preventDefault();

            const dni = document.getElementById('dni').value;
            const contrasena = document.getElementById('contrasena').value;

            try {
                await signInWithDNIAndPassword(dni, contrasena);
                redirectTo("usuarios.html");
            } catch (error) {
                console.error("Error al iniciar sesión:", error);
                switch (error.code) {
                    case "auth/user-not-found":
                        displayError("Usuario no encontrado.");
                        break;
                    case "auth/invalid-credential":
                        displayError("Credenciales incorrectas.");
                        break;
                    default:
                        displayError("Error al iniciar sesión. Inténtelo nuevamente más tarde.");
                }
            }
        });
    </script>
</body>
</html>
